<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>交通事件舆情可视化平台</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.0/darkly/bootstrap.min.css" rel="stylesheet" integrity="sha384-Bo21yfmmZuXwcN/9vKrA5jPUMhr7znVBBeLxT9MA4r2BchhusfJ6+n8TLGUcRAtL" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="js/echarts.js"></script>
    <link rel="stylesheet" href="css/font-awesome.min.css">

</head>

<body>
    <div style="background-color: #262b2e;">
        <div id="main">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark ">
                <a class="navbar-brand" href="#">交通事件舆情可视化平台</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarColor02">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="index.html">首页</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="all_events.html">所有事件<span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="search_result.html">搜索</a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="card text-white bg-primary mb-3" style="width: 60%;margin-left: 20%;float: left;cursor: pointer;" v-for="(event,index) in events" @click="visual_show(index)" v-if="cards_flag">
                <div class="card-header">{{event.event_name}}</div>
                <div class="card-body">
                    <h4 class="card-title">地点：{{event.location}} <br>时间:{{event.time}}</h4>
                    <p class="card-text">详细情况:{{event.detail}}</p>
                </div>
            </div>
            <div class="jumbotron" style="height: auto;width: 80%;margin-left: 10%;margin-top: 10%;" v-if="visual_flag">
                <button type="button" class="btn btn-primary" @click="visual_show(-1)">返回事件列表</button>
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#info">事件概要</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#analysis">事件分析</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">可视化</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" data-toggle="tab" href="#keyword" @click="keyword_show">关键词情况</a>
                            <a class="dropdown-item" data-toggle="tab" href="#keyword_timeline" @click="timeline_show">关键词热度变化</a>
                            <a class="dropdown-item" data-toggle="tab" href="#sex_percentage" @click="sex_show">微博用户性别比例</a>
                            <a class="dropdown-item" data-toggle="tab" data-toggle="tab" href="#relation" @click="relation_show">事件关系图</a>
                        </div>
                    </li>
                </ul>
                <div id="myTabContent" class="tab-content" style="height: auto;width: auto;">
                    <div class="tab-pane fade show active" id="info">
                        <div class="card text-white bg-primary mb-3" style="width: 80%;margin-left: 10%;margin-top: 5%;">
                            <div class="card-header">{{events[index].event_name}}</div>
                            <div class="card-body">
                                <h4 class="card-title">地点：{{events[index].location}} <br>时间:{{events[index].time}}</h4>
                                <p class="card-text">详细情况:{{events[index].detail}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="analysis">
                        <h1>事件分析</h1>
                        <h1>blablabla</h1>
                    </div>
                    <div class="tab-pane fade" id="keyword">
                        <div class="alert alert-dismissible alert-info" style="width: 20%;">
                            <strong>请耐心等待加载</strong>
                        </div>
                        <div id="keyword_chart" style="height: 1000%;width: 1000%;"></div>
                        <div class="alert alert-dismissible alert-danger" v-if="alert_show">
                            <strong>该事件暂未进行可视化，目前仅有重庆公交车坠江事件进行了可视化！</strong>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="keyword_timeline">
                        <div class="alert alert-dismissible alert-info" style="width: 20%;">
                            <strong>请耐心等待加载</strong>
                        </div>
                        <div id="keyword_timeline_chart" style="height: 800%;width: 1000%;"></div>
                        <div class="alert alert-dismissible alert-danger" v-if="alert_show">
                            <strong>该事件暂未进行可视化，目前仅有重庆公交车坠江事件进行了可视化！</strong>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="sex_percentage">
                        <div class="alert alert-dismissible alert-info" style="width: 20%;">
                            <strong>请耐心等待加载</strong>
                        </div>
                        <div id="sex_percentage_chart" style="height: 800%;width: 100%;"></div>
                        <div class="alert alert-dismissible alert-danger" v-if="alert_show">
                            <strong>该事件暂未进行可视化，目前仅有重庆公交车坠江事件进行了可视化！</strong>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="relation" style="height:auto;width: auto;">
                        <div class="alert alert-dismissible alert-info" style="width: 20%;">
                            <strong>请耐心等待加载</strong>
                        </div>
                        <div id="relation_chart" style="height:800%;width: 100%;"></div>
                        <div class="alert alert-dismissible alert-danger" v-if="alert_show">
                            <strong>该事件暂未进行可视化，目前仅有重庆公交车坠江事件进行了可视化！</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        var vm = new Vue({
            el: "#main",
            data: {
                cards_flag: true,
                visual_flag: false,
                events: [],
                index: -1,
                alert_show: false
            },
            methods: {
                visual_show(index_num) {
                    console.log(this.cards_flag, this.visual_flag, this.index);
                    this.cards_flag = !this.cards_flag;
                    this.visual_flag = !this.visual_flag;
                    this.index = index_num
                    console.log(this.cards_flag, this.visual_flag, this.index);
                },
                keyword_show() {
                    console.log(123)
                    this.alert_show = false;
                    if (this.index == 0) {
                        console.log(1234)
                        setTimeout(() => {
                            var myChart = echarts.init(document.getElementById('keyword_chart'), "dark");
                            option = {
                                legend: {},
                                tooltip: {
                                    trigger: 'axis',
                                },
                                toolbox: {
                                    show: true,
                                    feature: {
                                        dataZoom: {
                                            yAxisIndex: 'none'
                                        },
                                        dataView: {
                                            readOnly: false
                                        },
                                        magicType: {
                                            type: ['line', 'bar', 'stack', 'tiled']
                                        },
                                        restore: {},
                                        saveAsImage: {}
                                    }
                                },
                                dataset: {
                                    source: [
                                        ['product', '2018-10-28-11', '2018-10-28-12', '2018-10-28-13', '2018-10-28-14', '2018-10-28-15', '2018-10-28-16', '2018-10-28-17', '2018-10-28-18', '2018-10-28-19', '2018-10-28-20', '2018-10-28-21', '2018-10-28-22', '2018-10-28-23', '2018-10-29-00', '2018-10-29-01', '2018-10-29-02', '2018-10-29-03', '2018-10-29-04', '2018-10-29-05', '2018-10-29-06', '2018-10-29-07', '2018-10-29-08', '2018-10-29-09', '2018-10-29-10', '2018-10-29-11', '2018-10-29-12', '2018-10-29-13', '2018-10-29-14', '2018-10-29-15', '2018-10-29-16', '2018-10-29-17', '2018-10-29-18', '2018-10-29-19', '2018-10-29-20', '2018-10-29-21', '2018-10-29-22', '2018-10-29-23', '2018-10-30-00', '2018-10-30-01', '2018-10-30-02', '2018-10-30-03', '2018-10-30-04', '2018-10-30-05', '2018-10-30-06', '2018-10-30-07', '2018-10-30-08', '2018-10-30-09', '2018-10-30-10', '2018-10-30-11', '2018-10-30-12', '2018-10-30-13', '2018-10-30-14', '2018-10-30-15', '2018-10-30-16', '2018-10-30-17', '2018-10-30-18', '2018-10-30-19', '2018-10-30-20', '2018-10-30-21', '2018-10-30-22', '2018-10-30-23', '2018-10-31-00', '2018-10-31-01', '2018-10-31-02', '2018-10-31-03', '2018-10-31-04', '2018-10-31-05', '2018-10-31-06', '2018-10-31-07', '2018-10-31-08', '2018-10-31-09', '2018-10-31-10', '2018-10-31-11', '2018-10-31-12', '2018-10-31-13', '2018-10-31-14', '2018-10-31-15', '2018-10-31-16', '2018-10-31-17', '2018-10-31-18', '2018-10-31-19', '2018-10-31-20', '2018-10-31-21', '2018-10-31-22', '2018-10-31-23', '2018-11-01-00', '2018-11-01-01', '2018-11-01-02', '2018-11-01-03', '2018-11-01-04', '2018-11-01-05', '2018-11-01-06', '2018-11-01-07', '2018-11-01-08', '2018-11-01-09', '2018-11-01-10', '2018-11-01-11', '2018-11-01-12', '2018-11-01-13', '2018-11-01-14', '2018-11-01-15', '2018-11-01-16', '2018-11-01-17', '2018-11-01-18', '2018-11-01-19', '2018-11-01-20', '2018-11-01-21', '2018-11-01-22', '2018-11-01-23', '2018-11-02-00', '2018-11-02-01', '2018-11-02-02', '2018-11-02-03', '2018-11-02-04', '2018-11-02-05', '2018-11-02-06', '2018-11-02-07', '2018-11-02-08', '2018-11-02-09', '2018-11-02-10', '2018-11-02-11', '2018-11-02-12', '2018-11-02-13', '2018-11-02-14', '2018-11-02-15', '2018-11-02-16', '2018-11-02-17', '2018-11-02-18', '2018-11-02-19', '2018-11-02-20', '2018-11-02-21', '2018-11-02-22', '2018-11-02-23', '2018-11-03-00', '2018-11-03-01', '2018-11-03-02', '2018-11-03-03', '2018-11-03-04', '2018-11-03-05', '2018-11-03-06', '2018-11-03-07', '2018-11-03-08', '2018-11-03-09', '2018-11-03-10', '2018-11-03-11', '2018-11-03-12', '2018-11-03-13', '2018-11-03-14', '2018-11-03-15', '2018-11-03-16', '2018-11-03-17', '2018-11-03-18', '2018-11-03-19', '2018-11-03-20', '2018-11-03-21', '2018-11-03-22', '2018-11-03-23', '2018-11-04-00', '2018-11-04-01', '2018-11-04-02', '2018-11-04-03', '2018-11-04-04', '2018-11-04-05', '2018-11-04-06', '2018-11-04-07', '2018-11-04-08', '2018-11-04-09', '2018-11-04-10', '2018-11-04-11'],
                                        ['女司机', 14, 28, 45, 76, 99, 136, 174, 243, 313, 350, 428, 508, 568, 618, 680, 697, 707, 719, 732, 770, 813, 866, 918, 960, 1010, 1048, 1083, 1135, 1174, 1210, 1239, 1258, 1286, 1302, 1338, 1360, 1389, 1434, 1444, 1445, 1454, 1463, 1477, 1505, 1553, 1584, 1624, 1680, 1722, 1838, 1930, 2001, 2056, 2100, 2129, 2156, 2205, 2238, 2257, 2277, 2292, 2299, 2301, 2301, 2303, 2303, 2311, 2315, 2326, 2338, 2354, 2373, 2385, 2391, 2409, 2429, 2441, 2441, 2447, 2484, 2492, 2509, 2516, 2517, 2528, 2529, 2533, 2533, 2533, 2533, 2533, 2536, 2537, 2541, 2552, 2557, 2568, 2574, 2587, 2594, 2600, 2609, 2612, 2614, 2623, 2628, 2630, 2639, 2641, 2644, 2646, 2648, 2648, 2648, 2648, 2654, 2654, 2661, 2663, 2668, 2676, 2688, 2702, 2711, 2730, 2735, 2742, 2752, 2772, 2776, 2784, 2785, 2787, 2793, 2803, 2806, 2807, 2810, 2810, 2813, 2816, 2824, 2834, 2837, 2846, 2849, 2867, 2871, 2876, 2892, 2902, 2907, 2918, 2929, 2935, 2945, 2945, 2957, 2958, 2960, 2961, 2961, 2966, 2969, 2973, 3005, 3037, 3061, 3073],
                                        ['小轿车', 0, 12, 34, 46, 60, 84, 135, 197, 259, 313, 367, 430, 458, 478, 494, 500, 502, 516, 525, 554, 600, 707, 777, 860, 891, 944, 1015, 1073, 1118, 1167, 1197, 1243, 1317, 1345, 1416, 1496, 1513, 1534, 1552, 1555, 1565, 1569, 1579, 1605, 1650, 1693, 1794, 1853, 1912, 1977, 2049, 2094, 2138, 2184, 2231, 2255, 2293, 2305, 2311, 2321, 2325, 2327, 2328, 2328, 2328, 2328, 2329, 2330, 2336, 2349, 2363, 2373, 2385, 2399, 2408, 2421, 2429, 2429, 2431, 2435, 2439, 2446, 2446, 2449, 2462, 2483, 2492, 2494, 2500, 2504, 2517, 2547, 2568, 2585, 2613, 2625, 2637, 2645, 2651, 2660, 2670, 2676, 2684, 2685, 2687, 2693, 2693, 2695, 2698, 2698, 2698, 2700, 2701, 2702, 2702, 2702, 2702, 2703, 2707, 2722, 2729, 2735, 2738, 2747, 2750, 2756, 2758, 2763, 2768, 2775, 2783, 2783, 2785, 2788, 2789, 2792, 2792, 2793, 2793, 2794, 2794, 2796, 2797, 2803, 2807, 2807, 2814, 2815, 2816, 2818, 2822, 2825, 2830, 2832, 2835, 2838, 2838, 2838, 2839, 2841, 2842, 2842, 2843, 2843, 2847, 2852, 2853, 2862, 2866],
                                        ['原因', 9, 28, 40, 41, 48, 53, 66, 85, 96, 105, 120, 125, 132, 137, 143, 143, 145, 148, 149, 150, 161, 167, 174, 178, 183, 191, 196, 212, 225, 240, 250, 253, 255, 258, 262, 268, 271, 276, 277, 277, 277, 277, 277, 278, 286, 288, 291, 295, 298, 305, 306, 309, 313, 316, 319, 319, 323, 324, 324, 326, 328, 328, 328, 328, 328, 328, 328, 328, 330, 333, 339, 342, 343, 346, 348, 350, 353, 353, 355, 357, 358, 360, 360, 363, 365, 368, 368, 368, 368, 369, 370, 371, 373, 373, 374, 374, 379, 381, 383, 385, 386, 386, 388, 389, 389, 389, 391, 391, 392, 395, 395, 396, 396, 396, 396, 397, 399, 402, 408, 585, 751, 908, 1045, 1164, 1270, 1360, 1449, 1536, 1604, 1671, 1743, 1812, 1876, 1931, 1984, 2019, 2034, 2064, 2066, 2121, 2212, 2276, 2351, 2426, 2499, 2563, 2638, 2702, 2759, 2833, 2918, 2997, 3072, 3140, 3209, 3256, 3291, 3321, 3332, 3335, 3341, 3345, 3355, 3376, 3412, 3444, 3486, 3524, 3573],
                                        ['真相', 0, 0, 0, 0, 0, 1, 3, 7, 12, 19, 22, 31, 44, 52, 57, 58, 59, 60, 64, 69, 73, 79, 86, 87, 90, 96, 100, 105, 107, 111, 118, 118, 121, 125, 134, 144, 146, 154, 155, 157, 159, 159, 161, 162, 163, 166, 168, 170, 172, 178, 184, 189, 189, 191, 193, 195, 199, 208, 212, 214, 215, 215, 215, 215, 215, 215, 215, 215, 217, 221, 225, 226, 228, 229, 236, 237, 237, 237, 237, 241, 244, 245, 245, 245, 247, 254, 255, 258, 258, 258, 260, 263, 265, 267, 271, 273, 274, 275, 282, 284, 287, 293, 294, 295, 296, 296, 296, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 305, 305, 311, 314, 320, 323, 332, 342, 362, 381, 399, 411, 421, 436, 456, 466, 477, 491, 498, 500, 504, 504, 515, 518, 530, 540, 541, 558, 566, 578, 593, 607, 623, 642, 659, 671, 680, 693, 710, 731, 740, 743, 749, 751, 753, 754, 758, 766, 778, 782, 795, 809],
                                        ['黑匣子', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 9, 177, 416, 610, 722, 832, 895, 955, 988, 1021, 1027, 1055, 1067, 1095, 1109, 1120, 1130, 1134, 1139, 1143, 1147, 1148, 1150, 1150, 1156, 1172, 1198, 1220, 1249, 1272, 1279, 1288, 1295, 1304, 1325, 1337, 1343, 1350, 1355, 1360, 1364, 1365, 1375, 1375, 1375, 1375, 1375, 1375, 1376, 1377, 1381, 1385, 1406, 1429, 1436, 1444, 1458, 1468, 1484, 1488, 1494, 1505, 1512, 1515, 1521, 1529, 1532, 1536, 1538, 1539, 1539, 1539, 1541, 1544, 1550, 1555, 1558, 1561, 1563, 1568, 1571, 1575, 1575, 1576, 1578, 1579, 1581, 1604, 1604, 1609, 1611, 1615, 1617, 1617, 1618, 1619, 1619, 1619, 1620, 1620, 1622, 1624]
                                    ]
                                },
                                xAxis: {
                                    type: 'category'
                                },
                                yAxis: {
                                    gridIndex: 0
                                },
                                grid: {
                                    top: '55%'
                                },
                                series: [{
                                        type: 'line',
                                        smooth: true,
                                        seriesLayoutBy: 'row'
                                    }, {
                                        type: 'line',
                                        smooth: true,
                                        seriesLayoutBy: 'row'
                                    }, {
                                        type: 'line',
                                        smooth: true,
                                        seriesLayoutBy: 'row'
                                    }, {
                                        type: 'line',
                                        smooth: true,
                                        seriesLayoutBy: 'row'
                                    }, {
                                        type: 'line',
                                        smooth: true,
                                        seriesLayoutBy: 'row'
                                    },

                                    {
                                        type: 'pie',
                                        id: 'pie',
                                        radius: '30%',
                                        center: ['50%', '25%'],
                                        label: {
                                            formatter: '{b}: {@2012} ({d}%)'
                                        },
                                        encode: {
                                            itemName: 'product',
                                            value: '2012',
                                            tooltip: '2012'
                                        }
                                    }
                                ]
                            };

                            myChart.on('updateAxisPointer', function(event) {
                                var xAxisInfo = event.axesInfo[0];
                                if (xAxisInfo) {
                                    var dimension = xAxisInfo.value + 1;
                                    myChart.setOption({
                                        series: {
                                            id: 'pie',
                                            label: {
                                                formatter: '{b}: {@[' + dimension + ']} ({d}%)'
                                            },
                                            encode: {
                                                value: dimension,
                                                tooltip: dimension
                                            }
                                        }
                                    });
                                }
                            });
                            myChart.setOption(option);
                        })
                    } else {
                        this.alert_show = true;
                    }
                },
                timeline_show() {
                    console.log(123)
                    this.alert_show = false;
                    if (this.index == 0) {
                        console.log(1234)
                        setTimeout(() => {
                            var myChart = echarts.init(document.getElementById('keyword_timeline_chart'), "dark");
                            var hours = ['2018-10-28-11', '2018-10-28-19', '2018-10-29-03', '2018-10-29-11', '2018-10-29-19', '2018-10-30-03', '2018-10-30-11', '2018-10-30-19', '2018-10-31-03', '2018-10-31-11', '2018-10-31-19', '2018-11-01-03', '2018-11-01-11', '2018-11-01-19', '2018-11-02-03', '2018-11-02-11', '2018-11-02-19', '2018-11-03-03', '2018-11-03-11', '2018-11-03-19', '2018-11-04-03'];
                            var days = ['女司机', '公交车司机', '小轿车', '方向盘',
                                '父亲遇难', '原因', '真相', '黑匣子', '造谣|谣言', '道歉'
                            ];

                            var data = [
                                [0, 0, 243],
                                [0, 1, 454],
                                [0, 2, 263],
                                [0, 3, 298],
                                [0, 4, 187],
                                [0, 5, 235],
                                [0, 6, 476],
                                [0, 7, 145],
                                [0, 8, 72],
                                [0, 9, 111],
                                [0, 10, 49],
                                [0, 11, 24],
                                [0, 12, 57],
                                [0, 13, 34],
                                [0, 14, 20],
                                [0, 15, 84],
                                [0, 16, 54],
                                [0, 17, 31],
                                [0, 18, 70],
                                [0, 19, 53],
                                [0, 20, 101],
                                [1, 0, 4],
                                [1, 1, 16],
                                [1, 2, 11],
                                [1, 3, 20],
                                [1, 4, 20],
                                [1, 5, 6],
                                [1, 6, 15],
                                [1, 7, 4],
                                [1, 8, 9],
                                [1, 9, 13],
                                [1, 10, 3],
                                [1, 11, 2],
                                [1, 12, 4],
                                [1, 13, 1],
                                [1, 14, 5],
                                [1, 15, 67],
                                [1, 16, 59],
                                [1, 17, 51],
                                [1, 18, 84],
                                [1, 19, 59],
                                [1, 20, 35],
                                [2, 0, 197],
                                [2, 1, 303],
                                [2, 2, 360],
                                [2, 3, 383],
                                [2, 4, 312],
                                [2, 5, 298],
                                [2, 6, 402],
                                [2, 7, 73],
                                [2, 8, 45],
                                [2, 9, 62],
                                [2, 10, 59],
                                [2, 11, 131],
                                [2, 12, 60],
                                [2, 13, 15],
                                [2, 14, 22],
                                [2, 15, 41],
                                [2, 16, 29],
                                [2, 17, 11],
                                [2, 18, 22],
                                [2, 19, 16],
                                [2, 20, 21],
                                [3, 0, 3],
                                [3, 1, 9],
                                [3, 2, 2],
                                [3, 3, 8],
                                [3, 4, 12],
                                [3, 5, 3],
                                [3, 6, 4],
                                [3, 7, 1],
                                [3, 8, 5],
                                [3, 9, 3],
                                [3, 10, 3],
                                [3, 11, 2],
                                [3, 12, 1],
                                [3, 13, 0],
                                [3, 14, 27],
                                [3, 15, 247],
                                [3, 16, 225],
                                [3, 17, 228],
                                [3, 18, 290],
                                [3, 19, 176],
                                [3, 20, 221],
                                [4, 0, 0],
                                [4, 1, 0],
                                [4, 2, 0],
                                [4, 3, 0],
                                [4, 4, 0],
                                [4, 5, 0],
                                [4, 6, 0],
                                [4, 7, 0],
                                [4, 8, 0],
                                [4, 9, 0],
                                [4, 10, 4],
                                [4, 11, 112],
                                [4, 12, 370],
                                [4, 13, 102],
                                [4, 14, 98],
                                [4, 15, 3],
                                [4, 16, 4],
                                [4, 17, 1],
                                [4, 18, 4],
                                [4, 19, 3],
                                [4, 20, 2],
                                [5, 0, 85],
                                [5, 1, 58],
                                [5, 2, 35],
                                [5, 3, 75],
                                [5, 4, 24],
                                [5, 5, 18],
                                [5, 6, 24],
                                [5, 7, 9],
                                [5, 8, 14],
                                [5, 9, 15],
                                [5, 10, 11],
                                [5, 11, 6],
                                [5, 12, 15],
                                [5, 13, 7],
                                [5, 14, 189],
                                [5, 15, 951],
                                [5, 16, 483],
                                [5, 17, 407],
                                [5, 18, 571],
                                [5, 19, 338],
                                [5, 20, 189],
                                [6, 0, 7],
                                [6, 1, 51],
                                [6, 2, 29],
                                [6, 3, 31],
                                [6, 4, 39],
                                [6, 5, 13],
                                [6, 6, 25],
                                [6, 7, 20],
                                [6, 8, 11],
                                [6, 9, 15],
                                [6, 10, 17],
                                [6, 11, 15],
                                [6, 12, 22],
                                [6, 13, 5],
                                [6, 14, 11],
                                [6, 15, 88],
                                [6, 16, 99],
                                [6, 17, 43],
                                [6, 18, 118],
                                [6, 19, 90],
                                [6, 20, 46],
                                [7, 0, 0],
                                [7, 1, 2],
                                [7, 2, 0],
                                [7, 3, 0],
                                [7, 4, 0],
                                [7, 5, 1],
                                [7, 6, 0],
                                [7, 7, 1],
                                [7, 8, 718],
                                [7, 9, 345],
                                [7, 10, 80],
                                [7, 11, 102],
                                [7, 12, 94],
                                [7, 13, 32],
                                [7, 14, 31],
                                [7, 15, 88],
                                [7, 16, 44],
                                [7, 17, 20],
                                [7, 18, 20],
                                [7, 19, 39],
                                [7, 20, 5],
                                [8, 0, 29],
                                [8, 1, 63],
                                [8, 2, 48],
                                [8, 3, 17],
                                [8, 4, 25],
                                [8, 5, 9],
                                [8, 6, 19],
                                [8, 7, 24],
                                [8, 8, 30],
                                [8, 9, 60],
                                [8, 10, 37],
                                [8, 11, 15],
                                [8, 12, 31],
                                [8, 13, 8],
                                [8, 14, 12],
                                [8, 15, 9],
                                [8, 16, 8],
                                [8, 17, 3],
                                [8, 18, 10],
                                [8, 19, 6],
                                [8, 20, 2],
                                [9, 0, 8],
                                [9, 1, 34],
                                [9, 2, 21],
                                [9, 3, 16],
                                [9, 4, 29],
                                [9, 5, 102],
                                [9, 6, 45],
                                [9, 7, 15],
                                [9, 8, 16],
                                [9, 9, 8],
                                [9, 10, 2],
                                [9, 11, 1],
                                [9, 12, 1],
                                [9, 13, 2],
                                [9, 14, 3],
                                [9, 15, 20],
                                [9, 16, 11],
                                [9, 17, 4],
                                [9, 18, 4],
                                [9, 19, 10],
                                [9, 20, 1]

                            ];

                            var option = {
                                tooltip: {
                                    position: 'top'
                                },
                                title: [],
                                singleAxis: [],
                                series: []
                            };

                            echarts.util.each(days, function(day, idx) {
                                option.title.push({
                                    textBaseline: 'middle',
                                    top: (idx + 0.5) * 100 / 10 + '%',
                                    text: day
                                });
                                option.singleAxis.push({
                                    left: 150,
                                    type: 'category',
                                    boundaryGap: false,
                                    data: hours,
                                    top: (idx * 100 / 10 + 5) + '%',
                                    height: (100 / 10 - 10) + '%',
                                    axisLabel: {
                                        interval: 2
                                    }
                                });
                                option.series.push({
                                    singleAxisIndex: idx,
                                    coordinateSystem: 'singleAxis',
                                    type: 'scatter',
                                    data: [],
                                    symbolSize: function(dataItem) {
                                        return dataItem[1] * 0.18;
                                    }
                                });
                            });

                            echarts.util.each(data, function(dataItem) {
                                option.series[dataItem[0]].data.push([dataItem[1], dataItem[2]]);
                            });
                            myChart.setOption(option);
                        })
                    } else {
                        this.alert_show = true;
                    }
                },
                sex_show() {
                    console.log(123)
                    this.alert_show = false;
                    if (this.index == 0) {
                        console.log(1234)
                        setTimeout(() => {
                            var myChart = echarts.init(document.getElementById('sex_percentage_chart'), "dark");
                            var symbols = [
                                'path://M18.2629891,11.7131596 L6.8091608,11.7131596 C1.6685112,11.7131596 0,13.032145 0,18.6237673 L0,34.9928467 C0,38.1719847 4.28388932,38.1719847 4.28388932,34.9928467 L4.65591984,20.0216948 L5.74941883,20.0216948 L5.74941883,61.000787 C5.74941883,65.2508314 11.5891201,65.1268798 11.5891201,61.000787 L11.9611506,37.2137775 L13.1110872,37.2137775 L13.4831177,61.000787 C13.4831177,65.1268798 19.3114787,65.2508314 19.3114787,61.000787 L19.3114787,20.0216948 L20.4162301,20.0216948 L20.7882606,34.9928467 C20.7882606,38.1719847 25.0721499,38.1719847 25.0721499,34.9928467 L25.0721499,18.6237673 C25.0721499,13.032145 23.4038145,11.7131596 18.2629891,11.7131596 M12.5361629,1.11022302e-13 C15.4784742,1.11022302e-13 17.8684539,2.38997966 17.8684539,5.33237894 C17.8684539,8.27469031 15.4784742,10.66467 12.5361629,10.66467 C9.59376358,10.66467 7.20378392,8.27469031 7.20378392,5.33237894 C7.20378392,2.38997966 9.59376358,1.11022302e-13 12.5361629,1.11022302e-13',
                                'path://M28.9624207,31.5315864 L24.4142575,16.4793596 C23.5227152,13.8063773 20.8817445,11.7111088 17.0107398,11.7111088 L12.112691,11.7111088 C8.24168636,11.7111088 5.60080331,13.8064652 4.70917331,16.4793596 L0.149791395,31.5315864 C-0.786976655,34.7595013 2.9373074,35.9147532 3.9192135,32.890727 L8.72689855,19.1296485 L9.2799493,19.1296485 C9.2799493,19.1296485 2.95992025,43.7750224 2.70031069,44.6924335 C2.56498417,45.1567684 2.74553639,45.4852068 3.24205501,45.4852068 L8.704461,45.4852068 L8.704461,61.6700801 C8.704461,64.9659872 13.625035,64.9659872 13.625035,61.6700801 L13.625035,45.360657 L15.5097899,45.360657 L15.4984835,61.6700801 C15.4984835,64.9659872 20.4191451,64.9659872 20.4191451,61.6700801 L20.4191451,45.4852068 L25.8814635,45.4852068 C26.3667633,45.4852068 26.5586219,45.1567684 26.4345142,44.6924335 C26.1636859,43.7750224 19.8436568,19.1296485 19.8436568,19.1296485 L20.3966199,19.1296485 L25.2043926,32.890727 C26.1862111,35.9147532 29.9105828,34.7595013 28.9625083,31.5315864 L28.9624207,31.5315864 Z M14.5617154,0 C17.4960397,0 19.8773132,2.3898427 19.8773132,5.33453001 C19.8773132,8.27930527 17.4960397,10.66906 14.5617154,10.66906 C11.6274788,10.66906 9.24611767,8.27930527 9.24611767,5.33453001 C9.24611767,2.3898427 11.6274788,0 14.5617154,0 L14.5617154,0 Z',
                                'path://M512 292.205897c80.855572 0 146.358821-65.503248 146.358821-146.358821C658.358821 65.503248 592.855572 0 512 0 431.144428 0 365.641179 65.503248 365.641179 146.358821 365.641179 227.214393 431.144428 292.205897 512 292.205897zM512 731.282359c-80.855572 0-146.358821 65.503248-146.358821 146.358821 0 80.855572 65.503248 146.358821 146.358821 146.358821 80.855572 0 146.358821-65.503248 146.358821-146.358821C658.358821 796.273863 592.855572 731.282359 512 731.282359z'
                            ];
                            var bodyMax = 100; //指定图形界限的值
                            var labelSetting = {
                                normal: {
                                    show: true,
                                    position: 'bottom',
                                    offset: [0, 10],
                                    formatter: function(param) {
                                        return (param.value / bodyMax * 100).toFixed(0) + '%';
                                    },
                                    textStyle: {
                                        fontSize: 18,
                                        fontFamily: 'Arial',
                                        color: '#686868'
                                    }
                                }
                            };

                            var markLineSetting = { //设置标线
                                symbol: 'none',
                                lineStyle: {
                                    normal: {
                                        opacity: 0.3
                                    }
                                },
                                data: [{
                                    type: 'max',
                                    label: {
                                        normal: {
                                            formatter: 'max: {c}'
                                        }
                                    }
                                }, {
                                    type: 'min',
                                    label: {
                                        normal: {
                                            formatter: 'min: {c}'
                                        }
                                    }
                                }]
                            };

                            option = {
                                tooltip: {
                                    show: false, //鼠标放上去显示悬浮数据
                                },
                                legend: {
                                    data: ['环球网', '北京青年报', '央视新闻'],
                                    selectedMode: 'single',
                                    itemWidth: 10, //图例的宽度
                                    itemHeight: 10, //图例的高度
                                    itemGap: 30,
                                    orient: 'horizontal',
                                    left: 'center',
                                    top: '20px',
                                    icon: 'rect',
                                    // selectedMode: false, //取消图例上的点击事件
                                    textStyle: {
                                        color: '#808492'
                                    },
                                },
                                grid: {
                                    // left: '20%',
                                    // right: '20%',
                                    top: '20%',
                                    bottom: '20%',
                                    containLabel: true
                                },
                                xAxis: {
                                    data: ['a', 'x', 'b'],
                                    axisTick: {
                                        show: false
                                    },
                                    axisLine: {
                                        show: false
                                    },
                                    axisLabel: {
                                        show: false
                                    }
                                },
                                yAxis: {
                                    max: bodyMax,
                                    splitLine: {
                                        show: false
                                    },
                                    axisTick: {
                                        // 刻度线
                                        show: false
                                    },
                                    axisLine: {
                                        // 轴线
                                        show: false
                                    },
                                    axisLabel: {
                                        // 轴坐标文字
                                        show: false
                                    }
                                },
                                series: [{
                                    name: '环球网',
                                    type: 'pictorialBar',
                                    symbolClip: true,
                                    symbolBoundingData: bodyMax,
                                    label: labelSetting,
                                    data: [{
                                        value: 26.5,
                                        symbol: symbols[0],
                                        itemStyle: {
                                            normal: {
                                                color: 'rgba(105,204,230)' //单独控制颜色
                                            }
                                        },
                                    }, {

                                    }, {
                                        value: 73.5,
                                        symbol: symbols[1],
                                        itemStyle: {
                                            normal: {
                                                color: 'rgba(255,130,130)' //单独控制颜色
                                            }
                                        },
                                    }],
                                    // markLine: markLineSetting,
                                    z: 10
                                }, {
                                    name: '北京青年报',
                                    type: 'pictorialBar',
                                    symbolClip: true,
                                    symbolBoundingData: bodyMax,
                                    label: labelSetting,
                                    data: [{
                                        value: 28,
                                        symbol: symbols[0]
                                    }, {}, {
                                        value: 72,
                                        symbol: symbols[1]
                                    }],
                                    // markLine: markLineSetting,
                                    z: 10
                                }, {
                                    name: '央视新闻',
                                    type: 'pictorialBar',
                                    symbolClip: true,
                                    symbolBoundingData: bodyMax,
                                    label: labelSetting,
                                    data: [{
                                        value: 39.4,
                                        symbol: symbols[0]
                                    }, {}, {
                                        value: 60.7,
                                        symbol: symbols[1]
                                    }],
                                    // markLine: markLineSetting,
                                    z: 10
                                }, {
                                    // 设置背景底色，不同的情况用这个
                                    name: 'full',
                                    type: 'pictorialBar', //异型柱状图 图片、SVG PathData
                                    symbolBoundingData: bodyMax,
                                    animationDuration: 0,
                                    itemStyle: {
                                        normal: {
                                            color: '#ccc' //设置全部颜色，统一设置
                                        }
                                    },
                                    z: 10,
                                    data: [{
                                        itemStyle: {
                                            normal: {
                                                color: 'rgba(105,204,230,0.40)' //单独控制颜色
                                            }
                                        },
                                        value: 100,
                                        symbol: symbols[0]
                                    }, {
                                        // 设置中间冒号
                                        itemStyle: {
                                            normal: {
                                                color: '#1DA1F2' //单独控制颜色
                                            }
                                        },
                                        value: 100,
                                        symbol: symbols[2],
                                        symbolSize: [8, '18%'],
                                        symbolOffset: [0, '-200%']
                                    }, {
                                        itemStyle: {
                                            normal: {
                                                color: 'rgba(255,130,130,0.40)' //单独控制颜色
                                            }
                                        },
                                        value: 100,
                                        symbol: symbols[1]
                                    }]
                                }]
                            }
                            myChart.setOption(option);
                        }, 500)

                    } else {
                        this.alert_show = true;
                    }
                },
                relation_show() {
                    console.log(1)
                    this.alert_show = false;
                    if (this.index == 0) {
                        setTimeout(() => {
                            console.log(2)
                            var myChart = echarts.init(document.getElementById('relation_chart'), "dark");

                            // 指定图表的配置项和数据
                            var option = {
                                title: {
                                    text: "事件关系图"
                                },
                                series: [{
                                    type: "graph",
                                    roam: true,
                                    force: {
                                        repulsion: 2000,
                                        edgelength: [150, 100]
                                    },
                                    layout: "force",
                                    symbol: "circle",
                                    linestyle: {
                                        normal: {
                                            color: '#000', // 线的颜色[ default: '#aaa' ]
                                            width: 1, // 线宽[ default: 1 ]
                                            type: 'solid', // 线的类型[ default: solid ]   'dashed'    'dotted'
                                            opacity: 0.8, // 图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。[ default: 0.5 ]
                                            curveness: 0 // 边的曲度，支持从 0 到 1 的值，值越大曲度越大。[ default: 0 ]
                                        }
                                    },
                                    label: { // 关系对象上的标签
                                        normal: {
                                            show: true, // 是否显示标签
                                            position: "inside", // 标签位置:'top''left''right''bottom''inside''insideLeft''insideRight''insideTop''insideBottom''insideTopLeft''insideBottomLeft''insideTopRight''insideBottomRight'
                                            textStyle: { // 文本样式
                                                fontSize: 16
                                            }
                                        }
                                    },
                                    edgeLabel: { // 连接两个关系对象的线上的标签
                                        normal: {
                                            show: true,
                                            textStyle: {
                                                fontSize: 14
                                            },
                                            formatter: function(param) { // 标签内容
                                                return param.data.name;
                                            }
                                        }
                                    },
                                    data: [{
                                        name: "重庆坠江",
                                        symbolSize: 80,
                                        draggable: true,
                                        itemStyle: {
                                            color: '#ff0000'
                                        },

                                    }, {
                                        name: "22路公交车",
                                        symbolSize: 40,
                                        draggable: true
                                    }, {
                                        name: "公交车司机",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "14名乘客",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "女乘客刘某",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "黑匣子",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "监控视频",
                                        symbolSize: 20,
                                        draggable: true
                                    }, {
                                        name: "红色小轿车",
                                        symbolSize: 40,
                                        draggable: true
                                    }, {
                                        name: "女司机",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "有关部门",
                                        symbolSize: 40,
                                        draggable: true
                                    }, {
                                        name: "重庆市万州区党委政府",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "应急管理部",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "交通运输部",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "交警部门",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "其他",
                                        symbolSize: 40,
                                        draggable: true
                                    }, {
                                        name: "救援队",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "王斌",
                                        symbolSize: 20,
                                        draggable: true
                                    }, {
                                        name: "鲁玉鑫",
                                        symbolSize: 20,
                                        draggable: true
                                    }, {
                                        name: "上海打捞局",
                                        symbolSize: 20,
                                        draggable: true
                                    }, {
                                        name: "周小波",
                                        symbolSize: 20,
                                        draggable: true
                                    }, {
                                        name: "网友",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "目击者",
                                        symbolSize: 30,
                                        draggable: true
                                    }, {
                                        name: "媒体平台",
                                        symbolSize: 30,
                                        draggable: true
                                    }],
                                    links: [{
                                        source: "重庆坠江",
                                        target: "22路公交车",
                                        name: ' '
                                    }, {
                                        source: "重庆坠江",
                                        target: "红色小轿车",
                                        name: ' '
                                    }, {
                                        source: "重庆坠江",
                                        target: "其他",
                                        name: ' '
                                    }, {
                                        source: "重庆坠江",
                                        target: "目击者",
                                        name: ' '
                                    }, {
                                        source: "重庆坠江",
                                        target: "有关部门",
                                        name: ' '
                                    }, {
                                        source: "22路公交车",
                                        target: "公交车司机",
                                        name: ' '
                                    }, {
                                        source: "22路公交车",
                                        target: "14名乘客",
                                        name: ' '
                                    }, {
                                        source: "22路公交车",
                                        target: "女乘客刘某",
                                        name: ' '
                                    }, {
                                        source: "22路公交车",
                                        target: "黑匣子",
                                        name: ' '
                                    }, {
                                        source: "黑匣子",
                                        target: "监控视频",
                                        name: ' '
                                    }, {
                                        source: "红色小轿车",
                                        target: "女司机",
                                        name: ' '
                                    }, {
                                        source: "有关部门",
                                        target: "重庆市万州区党委政府",
                                        name: ' '
                                    }, {
                                        source: "有关部门",
                                        target: "应急管理部",
                                        name: ' '
                                    }, {
                                        source: "有关部门",
                                        target: "交通运输部",
                                        name: ' '
                                    }, {
                                        source: "有关部门",
                                        target: "交警部门",
                                        name: ' '
                                    }, {
                                        source: "其他",
                                        target: "救援队",
                                        name: ' '
                                    }, {
                                        source: "救援队",
                                        target: "王斌",
                                        name: '救捞行动前线总指挥'
                                    }, {
                                        source: "救援队",
                                        target: "鲁玉鑫",
                                        name: ' '
                                    }, {
                                        source: "救援队",
                                        target: "上海打捞局",
                                        name: ' '
                                    }, {
                                        source: "救援队",
                                        target: "周小波",
                                        name: ' '
                                    }, {
                                        source: "网友",
                                        target: "女司机",
                                        name: '语言攻击'
                                    }, {
                                        source: "其他",
                                        target: "网友",
                                        name: ' '
                                    }, {
                                        source: "其他",
                                        target: "目击者",
                                        name: ' '
                                    }, {
                                        source: "其他",
                                        target: "媒体平台",
                                        name: ' '
                                    }, {
                                        source: "重庆市万州区党委政府",
                                        target: "22路公交车",
                                        name: '组织救援打捞'
                                    }, {
                                        source: "应急管理部",
                                        target: "22路公交车",
                                        name: '组织救援打捞'
                                    }, {
                                        source: "交通运输部",
                                        target: "22路公交车",
                                        name: '组织救援打捞'
                                    }, {
                                        source: "交警部门",
                                        target: "女司机",
                                        name: '控制'
                                    }, {
                                        source: "媒体平台",
                                        target: "女司机",
                                        name: '造谣逆行'
                                    }, {
                                        source: "鲁玉鑫",
                                        target: "黑匣子",
                                        name: '打捞出水'
                                    }, {
                                        source: "公交车司机",
                                        target: "女乘客刘某",
                                        name: '发生口角'
                                    }, {
                                        source: "女乘客刘某",
                                        target: "公交车司机",
                                        name: '发生口角'
                                    }, {
                                        source: "周小波",
                                        target: "14名乘客",
                                        name: '父亲是车上一名遇难乘客'
                                    }, {
                                        source: "救援队",
                                        target: "周小波",
                                        name: '副队长'
                                    }]
                                }]
                            };

                            // 使用刚指定的配置项和数据显示图表。
                            myChart.setOption(option);

                        }, 500)
                    } else {
                        this.alert_show = true;
                    }
                }
            },
            created() {
                axios.get('http://rensz.xyz:5000/event').then(res => {
                        console.log(res.data.result);
                        this.events = res.data.result;
                    },
                    function(err) {
                        console.log(err)
                    })
            }
        });
    </script>
</body>

</html>